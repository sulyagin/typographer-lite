!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).typographerLite=t()}(this,(function(){"use strict";function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var n=function(){function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,n);var r={container:"body",excludeTags:["script","style","title","code"],locale:"en_US"};this.settings=Object.assign({},r,t),this.settings.excludeTags=this.settings.excludeTags.map((function(e){return e.toUpperCase()})),"undefined"!=typeof window&&(this.parse=this.parse.bind(this),document.addEventListener("DOMContentLoaded",this.parse))}var r,o,a;return r=n,(o=[{key:"parse",value:function(){for(var e,t=this,n=document.createNodeIterator(document.querySelector(this.settings.container),NodeFilter.SHOW_TEXT,{acceptNode:function(e){if(/\S/.test(e.data)&&!t.settings.excludeTags.includes(e.parentNode.nodeName))return NodeFilter.FILTER_ACCEPT}},!1);e=n.nextNode();)Object.keys(this.rules()).forEach((function(n){return e.nodeValue=t.rules()[n](e.nodeValue)}))}},{key:"rules",value:function(){var e=this;return{setQuotesEntity:function(e){return e.replace(/&quot;/g,'"')},setPretexts:function(e){var t="$1$2 ",n=new RegExp('(^|[  («‹»›„“‟”"])([а-яёa-z]{1,2}) ',"gim");return e.replace(n,t).replace(n,t)},setQuotes:function(t){return"ru_RU"===e.settings.locale?t.replace(/"([^"]*)"/g,"«$1»"):t.replace(/"([^"]*)"/g,"“$1”").replace(/«([^"]*)»/g,"“$1”")},setDashes:function(e){var t=new RegExp("([  ])(--?|‒|–|—)([  \\n])","g");return e.replace(t," —$3")},setSpaceAfterNumber:function(e){return e.replace(new RegExp("(^|\\D)(\\d{1,5}) ([а-яёa-z]+)","gi"),"$1$2 $3")},setApostrophe:function(t){if("en_US"!==e.settings.locale)return t;var n=new RegExp("([a-z])'([a-z])","gi");return t.replace(n,"$1’$2")},removeRepeatedSpaces:function(e){return e.replace(/([^\n \t])[ \t]{2,}(?![\n \t])/g,"$1 ")}}}},{key:"format",value:function(e){var t=this;return"string"==typeof e&&(Object.keys(this.rules()).forEach((function(n){return e=t.rules()[n](e)})),e)}}])&&t(r.prototype,o),a&&t(r,a),n}();return n}));
